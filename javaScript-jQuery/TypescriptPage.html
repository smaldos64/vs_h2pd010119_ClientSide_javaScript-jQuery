<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <title>Typescript</title>
    <script src="Scripts/jquery-3.3.1.js"></script>
</head>

<body>
    <input id="txtFirstOperand" type="text" />

    <select id="SelectMathOperation"></select>

    <input id="txtSecondOperand" type="text" />

    <br />
    <br />
    <input id="btnCalculate" type="button" value="Beregn" />
    &nbsp;
    <input id="btnClear" type="button" value="Clear" />

    <br />
    <br />
    Resultat :
    &nbsp;
    <input id="txtResult" type="text" disabled="disabled" />

    <br />
    <br />
    Resultat :
    &nbsp;
    <input id="txtResultTypeScript" type="text" disabled="disabled" />

    <br />
    <br />
    <label for="NumberMathOperations" id="lblNumberMathOperations"></label>
    <br />
    <br />
    <textarea id="TxtAreaMathOperations" rows="2" cols="20"></textarea>

    <br />
    <br />

    <label for="NumberMathOperations" id="lblMathOperationsContent">Historik for udførte Matematiske Operationer</label>
    <br />
    <br />
    <div id="MathOperationsContent">

    </div>

    <script id="scriptMathOperations" type="app/template">
        <div class="StoredMathOperations">
            <span>{{MathOperationLine}}</span>
        </div>
    </script>
</body>

</html>

<script src="ScriptFiles/Math_TypeScript.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        Counter = 0;
        while (Counter < TypeScriptMathArray.length) {
            var option = document.createElement("option");
            option.value = TypeScriptMathArray[Counter].ThisMathOperation;
            option.text = TypeScriptMathArray[Counter].ThisMathOperationString;
            $("#SelectMathOperation").append(option)
            Counter++;
        }

        $("#lblNumberMathOperations").html("Sidste operation på de " + TypeScriptMathArray.length.toString() + " forskellige regne operationer");
        $("#TxtAreaMathOperations").attr("rows", TypeScriptMathArray.length);
        UpdateLastMathOperationTextArea();

        TextBoxElements = $(":input[type=text]");

        $("#btnClear").click(function () {
            TypeScriptClearTextBoxes({ TextBoxArray: TextBoxElements });
        });

        function UpdateLastMathOperationTextArea() {
            $("#TxtAreaMathOperations").html("");

            for (Counter = 0; Counter < TypeScriptMathArray.length; Counter++) {
                $("#TxtAreaMathOperations").append(
                   GetTemplateStringFromMathOperation({ MathOperation_Object : TypeScriptMathArray[Counter]}));
                if (Counter < TypeScriptMathArray.length - 1) {
                    $("#TxtAreaMathOperations").append("\n");
                }
            }
        }

        function UpdateAllMathOperationArea()
        {
            var Template = $("#scriptMathOperations").html().trim();
            var TemplateString = GetTemplateStringFromMathOperation({ MathOperation_Object: TypeScriptMathArray[MathOperationIndex] });
            var Content = Template.replace(/{{MathOperationLine}}/ig, TemplateString);

            $("#MathOperationsContent").append(Content);
        }

        $("#btnCalculate").click(function () {
            Value = parseInt($("#SelectMathOperation").val());
            MathOperationResult = TypeScriptCalculateMathResult({ MathOperation: Value, Value1String: $("#txtFirstOperand").val(), Value2String: $("#txtSecondOperand").val() });
            $("#txtResult").val(MathOperationResult);

            $("#txtResultTypeScript").val(TypeScriptMathArray[MathOperationIndex]);

            UpdateLastMathOperationTextArea();

            UpdateAllMathOperationArea();
        });

    });

</script>